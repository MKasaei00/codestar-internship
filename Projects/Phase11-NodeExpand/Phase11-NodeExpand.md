<div dir="rtl" align='justify'>

# فاز یازده: Expand نودها
در این فاز ما خواهیم توانست تا یک حساب را به عنوان یک نود روی بوم گراف وارد کنیم. سپس باExpand کردن این نود، تمامی حساب‌های دیگری که با این حساب تراکنش داشته‌اند روی صفحه نشان داده‌شوند.
<br>
در واقع قرار است چیزی شبیه به آن چه در زیر مشاهده می‌کنید را پیاده‌سازی کنیم.

<p align="center" style="text-align:center;"><img src="expand3.gif" alt="Logo"  align="cneter"></p>

## 1- مرور کارهای انجام شده
ما تا این قسمت از پروژه تا جای خوبی پیش رفته‌ایم،  با محیط آشنا شده‌ایم، می‌توانیم تراکنش‌ها را به صورت گرافیکی روی محور صفحه ایجاد کنیم و هر یک از آن‌ها را به وسیله دو نود و یک لینک گراف شناسایی کنیم.
با این تفاسیر کاملا آماده‌شده‌ایم تا این فاز را پیاده‌سازی کنیم.

## 2- ایمپورت دیتاست
در این فاز هم مانند فاز قبل یک فایل csv حاوی تراکنش‌های بانکی فرضی در اختیارتان قرار می‌گیرد. اما این‌یکی شامل تعداد زیادی تراکنش بانکی می‌شود و قرار است کارهای جدیدی روی آن انجام دهیم. هم‌چنین یک دیتاست دیگر حاوی اطلاعات حساب‌های موجود در تراکنش‌هاست. 
<br>
می‌توانید فایل را از این زیر دانلود کنید.

<a href="testData1.zip" download>Click to Download</a>


## 3- نمایش یک حساب به عنوان نود گراف
در فاز قبلی ما هرتراکنش را به صورت دمبل نشان می‌دادیم. در این فاز باید بتوانیم در ابتدا یک حساب را به‌تنهایی به عنوان نود گراف روی صفحه نشان بدهیم. بدین صورت که کاربر بتواند یک شماره‌حساب را در برنامه سرچ کند و در صورت وجود آن شماره‌حساب، یک نود گراف که روی آن اسم مالک حساب نوشته شده روی صفحه ظاهر شود.
<br>
برنامه باید طوری باشد که اگر کاربر به تعداد دلخواه، شماره حساب سرچ کرد، در صورت وجود روی صفحه نود گراف ظاهر شود.
هم‌چنین این ویژگی‌ که با کلیک روی  نود، اطلاعات حساب نمایش‌داده شود باید وجود داشته‌باشد.

## 4-  قابلیت کلیک‌راست روی نود
بعد از این‌که کاربر یک شماره‌حساب را سرچ‌کرد و نود گراف روی صفحه نمایش‌داده شد، باید ویژگی‌ای را در نظر بگیرید که کاربر بتواند روی آن کلیک راست کند و لیست حاوی سه گزینه‌ نمایان شود.

1. پاک کردن نود
1. انتخاب کردن نود
1. Expand کردن نود

پاک کردن نود از روی بوم گراف که بدیهی است. با انتخاب آن، صرفا نود از روی صفحه پاک می شود. انتخاب کردن نود برای فاز‌های بعدی کاربرد مهمی دارد و فعلا با آن کاری نداریم. Expandکردن نود در ادامه همین داک توضیح داده خواهدشد.
<br>
در این زیر شما بخشی از نرم افزار تحلیل‌داده خارجی را مشاهد‌ه می‌کنید که کاربر بعد از جست‌وجوی یک نام، نتیجه مطلوب خود را انتخاب می‌کند و روی صفحه یک نود گراف ظاهر می‌شود. سپس با راست‌کلیک کردن روی آن نود، لیستی حاوی چند گزینه نمایان می شود.


<p align="center" style="width:70% text-align:center;" ><img src="palantir.gif" alt="Logo"  align="cneter"  style="center"></p>

البته در این ویدئو، چون کاربر یک نام را سرچ می‌کند زیر "search bar" چندین نتیجه نمایان می‌شود. ما چون با یک حساب بانکی سر و کار داریم و شماره حساب یکتا محسوب می‌شود، یا یک نتیجه نمایان خواهد شد یا نتیجه‌ای نخواهیم داشت.





## 5-  Expand کردن نود
ما تا این بخش، به کاربر استفاده‌کننده از نرم‌افزار این توانایی را داده‌ایم که یک شماره حساب را سرچ‌کند، آن را به عنوان یک نود روی صفحه بیندازد، روی آن راست کلیک کند و لیستی حاوی سه گزینه نمایان شود.
<br>
با انتخاب گزینه expand، باید تمامی حساب‌هایی که در دیتابیس‌ما با حساب موجود روی صفحه تراکنش داشتند، به همراه لینک تراکنش‌ بین آن‌ها، روی صفحه نشان‌داده‌شود. لینک تراکنش باید جهت‌دار باشد و جهت آن از حساب مبدا به حساب مقصد باشد. هم‌چنین میزان مبلغ تراکنش روی لینک بین آن‌ها نوشته‌شود.


## 6-  چالش‌های پیاده‌سازی Expand نود
به طور پیش‌فرض برای پیاده‌سازی این بخش، باید در دیتابیس تمامی تراکنش‌هایی‌ها را که حساب موردنظر در آن‌ها حضور داشتند پیداکنیم و دمبل تراکنش‌ بین‌ آن‌ها را تشکیل‌دهیم. با این کار مثلا اگر حساب موردنظر 90 تراکنش انجام‌شده در دیتابیس داشته‌باشد، 90 دنبل روی صفحه ایجاد می‌شود که نتیجه‌ی جالبی نیست و به درد تحلیل‌گر نمی‌خورد. برای این‌کار ما باید تمامی دنبل‌هایی را که یک سرشان حساب موردنظر است، ادغام(merge) کنیم تا چیزی شبیه تصویر اول داک به وجود بیاید.
<br>

به تصویر زیر دقت‌کنید.

<p align="center" style="text-align:center;"><img src="convertgif.gif" alt="Logo"  align="cneter"></p>

 در پروژه ما فقط باید گراف ادغام شده را به کاربر نشان بدهیم و مرحله ادغام شدن در این تصویر برای فهم بهتر است. نتیجه‌ای که به کاربر نشان داده‌می‌شود باید شبیه گیف موجود در اول داک باشد.

اما چگونه باید ادغام را پیاده‌سازی کنیم؟ (خوب است لحظاتی به این سوال فکر کنیم)
<br>
برای این کار کافی است نود‌هایی را که دقیقا تکرار شده‌ی نود اولیه بوده‌اند، یعنی نمایان‌گر یک حساب واحدند تبدیل به یک نود کنیم و بقیه نود‌های موجود در نتیجه جست‌ و جو را به آن متصل کنیم. برای شناسایی این که کدام نودها یکی هستند، باید آن‌ها را از طریق شماره حساب شناسایی کنیم. شماره حساب در این پروژه برای هر حساب مجزا، عدد یونیک در نظر گرفته شده‌است.

## 7-  حالت خاص
وقتی قرار است تراکنش‌های انجام‌شده توسط یک حساب را رسم‌کنیم، حالت خاصی به وجود می‌آید که حساب مورد نظر ما با یک حساب خاص، چند تراکنش داشته‌باشد. 
برای این حالت‌ها، با انگولار می‌توانید به سادگی یال‌های انحنا دار بین دو نود به راحتی ایجاد کنید تا چیزی شبیه به تصویر زیر ایجاد کنید.


<p align="center" style="text-align:center;"><img src="curve.jpg" alt="Logo"  align="cneter"></p>




# پیاده‌سازی


<h1 dir="rtl">گسترس گراف، Expading</h1>

<div dir="rtl">شما باید به کمک
            اگما و ابزار های جاوا اسکریپت پنلی ایجاد کنید که به کمک آن بتوان راس ها و همسایه های یک راس را به گراف
            موجود در صفحه اکما اضافه کرد.</div>

<div dir="rtl">به دو طریق میتوان
            از انبار داده ها داده (راس و یال) به گراف مصور شده اضافه کرد.</div>

<div dir="rtl">1- به کمک سرچ، یعنی
            شما باید یک پنجره سرچ بسازید که در آن بتوان روی داده ها سرچ انجام داد و نتیایج را وارد گراف کرد و نشان
            داد. سرچی که شما اینجا باید پشتیبانی کنید سرچ ساده و یا <strong>exact search</strong> است. به طور مثال
            کاربر باید بتواند شماره حساب مد نظر خود را وارد کند و شما آن را سرچ کنید و در صورتی که حسابی با آن شماره
            وجود داشت باید اطلاعات آن را از سرور <strong>backend </strong>بگیرید و آن راس را به شکل اضافه کنید.(در
            صورت علاقه میتوانید فیلتر های بیشتری را پشتیبانی کنید.)</div>

<div dir="rtl">نکته: در صورتی که
            راس <strong>A</strong> قبلا به گراف ما اضافه شده باشد و بعدا با سرچ دیگری راس <strong>B</strong> به گراف
            ما اضافه شد. چنانچه که یالی بین <strong>A,B</strong> وجود داشته باشد باید نشان داده شود.(وقتی کاربر از
            محصول ما استفاده میکند و میخواهد به کمک آن روابط را تحلیل کند نیاز دارد تمامی یال های بین راس های موجود
            را ببیند.)</div>

<div dir="rtl">2- شما باید یک سرچ
            مخصوص گسترش ایجاد کنید(<strong>Expand</strong>)، به اینصورت کار میکند که فرض کنید تعدادی از رئوس در حالت
            <strong>selected </strong>هستند و ما میخواهیم بعضی از همسایه های آن ها را که شرایط خاصی دارند به شکل
            اضافه کنیم. شما باید این قابلیت را داشته باشید که کاربر بتواند تعدادی راس را <strong>select </strong>کند
            و بعد <strong>expand </strong>را بزند و یک پنجره فیلتر بیاید که از کاربر فیلتر های مربوط به گسترش را
            بگیرد. فیلتر هایی که شما باید حتما پشتیبانی کنید عبارت اند از:</div>

<div dir="rtl">الف) میزان مبلغ
            تراکنش (یعنی شرط کمتر و یا بیشتر و یا مساوی با یک مبلغی را بتوان به عنوان فیلتر اضافه کرد)
</div>

<div dir="rtl">ب) تاریخ تراکنش
            (یعنی قبل یا بعد یک تاریخ را باید به عنوان یک فیلتر در نظر بگیرید. تاریخ ها همه میلادی هستند). پیشنهاد
            میشه از <strong><a href="https://blog.logrocket.com/javascript-date-libraries/">این </a></strong>لایبرری
            ها استفاده کنید.</div>

<div dir="rtl">ج) اسم صاحب حساب
            (یعنی شما باید بتوانید روی&nbsp;اسم صاحب حسابی که میخواهید بیارید سرچ انجام بدهید). برای غنای بیشتر کار
            میتوانید سرچ های <strong>startwith </strong>و <strong>endwith </strong>و <strong>contains </strong>رو هم
            پشتیبانی کنید.&nbsp;&nbsp;</div>

<div dir="rtl">&nbsp;</div>

<div dir="rtl">توصیه من به شما این
            است که api های خود را به صورت کلی و جنرال طراحی کنید تا فیچر های بیشتری را با پیاده سازی کمتر و باگ کمتر
            پشتیبانی کنید.</div>

<div dir="rtl">به طور مثال شما هم
            باید یک سرچ ساده&nbsp;برای اضافه کردن یکسری راس انجام بدهید و هم یکسری سرچ پیچیده تر برای گسترش گراف.
            شما میتوانید به این صورت به داستان نگاه کنید که سرچ اولی یک حالت خاص از سرچ دومی است و در سرچ دومی شما
            باید از بین راس ها تنها آن هایی را بیارید که همسایه رئوس <strong>selected&nbsp;</strong>اند و این به
            اینصورت است که شما یک لیست از شماره حساب هارا دارید و باید در <strong>query </strong>ای که به الاستیک
            میزنید آن را لحاظ کنید و فقط آن لینک هایی را بیارید که حداقل یک کدام از&nbsp;<strong>sourceId </strong>و
            <strong>targetId </strong>آن ها در داخل این لیست است ولی در سرچ اولی چنین لیستی وجود ندارد ولی باقی
            <strong>query </strong>شبیه هم هست و سعی کنید با یک ساختار خوب از&nbsp;<strong>duplication
            </strong>پرهیز کنید.</div>

<div dir="rtl">همراه با
            داک&nbsp;فاز های بعدی هم سعی میکنم اطلاعات مفیدی جهت تسهیل پروزه بفرستم.</div>

<div dir="rtl">&nbsp;</div>



</div>
